name: Replace Email

on: fork

permissions:
    contents: write

jobs:
    initialize-repository:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@main

            - name: Repace Template Repo name
              run: |
                  author_name=${{ github.actor }}
                  owner_name=${{ github.event.repository.owner.name }}
                  author_full_name=${{ github.event.forkee.full_name }}
                  email_id=${{ github.event.repository.owner.email }}

                  echo "${author_name}, ${owner_name}, ${author_full_name}, ${email_id}"

                  # replace Name in README.md
                  sed -i "s/Pritam/${author_name}/g" README.md

                  # replace Full name in LICENSE
                  sed -i "s/Pritam Kundu/${author_full_name}/g" LICENSE

                  # replace username in all_files 
                  find . -type f -exec sed -i "s/warmachine028/${author_name}/g; s/pritamkundu771@gmail.com/${email_id}/g" {} +

